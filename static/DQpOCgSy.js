import q from"./CVLzIqc3.js";import{_ as H}from"./CEI7pgpU.js";import{f as g,o as f,x as y,w as d,j as w,k as U,l as n,m as M,am as W,an as K,y as j,z as G,A as I,ao as L,D as N,E as z,ap as F,C as S,b as p,aq as J,ar as X,as as Z,at as Q,au as Y,av as A,aw as ee,ax as C,r as O,a1 as ae,P as te,ay as se,az as oe,V as ne,aA as E,aB as re,a2 as ie,aC as le,g as de,h as ce,aD as ue,c as V,a as b,d as B,t as pe,n as R,q as fe}from"./Cec1R0xs.js";const _e=g({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const o=t;return(e,i)=>(f(),y(n(W),{as:e.as,"as-child":e.asChild,class:U(n(M)(n(me)({variant:e.variant,size:e.size}),o.class))},{default:d(()=>[w(e.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),me=K("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),he=g({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:o}){const a=j(t,o);return(s,v)=>(f(),y(n(L),G(I(n(a))),{default:d(()=>[w(s.$slots,"default")]),_:3},16))}}),ge=g({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const e=N(t);return(i,a)=>(f(),y(n(F),z({class:"outline-none"},n(e)),{default:d(()=>[w(i.$slots,"default")]),_:3},16))}}),ye=g({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:o}){const e=t,i=o,a=S(()=>{const{class:v,...c}=e;return c}),s=j(a,i);return(v,c)=>(f(),y(n(X),null,{default:d(()=>[p(n(J),z(n(s),{class:n(M)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e.class)}),{default:d(()=>[w(v.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),ve=g({__name:"DropdownMenuGroup",props:{asChild:{type:Boolean},as:{}},setup(t){const o=t;return(e,i)=>(f(),y(n(Z),G(I(o)),{default:d(()=>[w(e.$slots,"default")]),_:3},16))}}),De=g({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(t){const o=t,e=S(()=>{const{class:a,...s}=o;return s}),i=N(e);return(a,s)=>(f(),y(n(Q),z(n(i),{class:n(M)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a.inset&&"pl-8",o.class)}),{default:d(()=>[w(a.$slots,"default")]),_:3},16,["class"]))}}),be=g({__name:"DropdownMenuSeparator",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const o=t,e=S(()=>{const{class:i,...a}=o;return a});return(i,a)=>(f(),y(n(Y),z(e.value,{class:n(M)("-mx-1 my-1 h-px bg-muted",o.class)}),null,16,["class"]))}}),we=g({__name:"DropdownMenuLabel",props:{asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(t){const o=t,e=S(()=>{const{class:a,...s}=o;return s}),i=N(e);return(a,s)=>(f(),y(n(A),z(n(i),{class:n(M)("px-2 py-1.5 text-sm font-semibold",a.inset&&"pl-8",o.class)}),{default:d(()=>[w(a.$slots,"default")]),_:3},16,["class"]))}}),xe=t=>t==="defer"||t===!1;function Ce(...t){var T;const o=typeof t[t.length-1]=="string"?t.pop():void 0;typeof t[0]!="string"&&t.unshift(o);let[e,i,a={}]=t;if(typeof e!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof i!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const s=ee(),v=i,c=()=>C.value,_=()=>s.isHydrating?s.payload.data[e]:s.static.data[e];a.server=a.server??!0,a.default=a.default??c,a.getCachedData=a.getCachedData??_,a.lazy=a.lazy??!1,a.immediate=a.immediate??!0,a.deep=a.deep??C.deep,a.dedupe=a.dedupe??"cancel";const D=()=>a.getCachedData(e,s)!=null;if(!s._asyncData[e]||!a.immediate){(T=s.payload._errors)[e]??(T[e]=C.errorValue);const u=a.deep?O:ae;s._asyncData[e]={data:u(a.getCachedData(e,s)??a.default()),pending:O(!D()),error:te(s.payload._errors,e),status:O("idle"),_default:a.default}}const r={...s._asyncData[e]};delete r._default,r.refresh=r.execute=(u={})=>{if(s._asyncDataPromises[e]){if(xe(u.dedupe??a.dedupe))return s._asyncDataPromises[e];s._asyncDataPromises[e].cancelled=!0}if((u._initial||s.isHydrating&&u._initial!==!1)&&D())return Promise.resolve(a.getCachedData(e,s));r.pending.value=!0,r.status.value="pending";const h=new Promise((m,l)=>{try{m(v(s))}catch(x){l(x)}}).then(async m=>{if(h.cancelled)return s._asyncDataPromises[e];let l=m;a.transform&&(l=await a.transform(m)),a.pick&&(l=Be(l,a.pick)),s.payload.data[e]=l,r.data.value=l,r.error.value=C.errorValue,r.status.value="success"}).catch(m=>{if(h.cancelled)return s._asyncDataPromises[e];r.error.value=re(m),r.data.value=n(a.default()),r.status.value="error"}).finally(()=>{h.cancelled||(r.pending.value=!1,delete s._asyncDataPromises[e])});return s._asyncDataPromises[e]=h,s._asyncDataPromises[e]},r.clear=()=>Pe(s,e);const P=()=>r.refresh({_initial:!0}),k=a.server!==!1&&s.payload.serverRendered;{const u=ie();if(u&&!u._nuxtOnBeforeMountCbs){u._nuxtOnBeforeMountCbs=[];const l=u._nuxtOnBeforeMountCbs;se(()=>{l.forEach(x=>{x()}),l.splice(0,l.length)}),oe(()=>l.splice(0,l.length))}k&&s.isHydrating&&(r.error.value||D())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):u&&(s.payload.serverRendered&&s.isHydrating||a.lazy)&&a.immediate?u._nuxtOnBeforeMountCbs.push(P):a.immediate&&P();const h=le();if(a.watch){const l=ne(a.watch,()=>r.refresh());h&&E(l)}const m=s.hook("app:data:refresh",async l=>{(!l||l.includes(e))&&await r.refresh()});h&&E(m)}const $=Promise.resolve(s._asyncDataPromises[e]).then(()=>r);return Object.assign($,r),$}function Pe(t,o){o in t.payload.data&&(t.payload.data[o]=void 0),o in t.payload._errors&&(t.payload._errors[o]=C.errorValue),t._asyncData[o]&&(t._asyncData[o].data.value=void 0,t._asyncData[o].error.value=C.errorValue,t._asyncData[o].pending.value=!1,t._asyncData[o].status.value="idle"),o in t._asyncDataPromises&&(t._asyncDataPromises[o]&&(t._asyncDataPromises[o].cancelled=!0),t._asyncDataPromises[o]=void 0)}function Be(t,o){const e={};for(const i of o)e[i]=t[i];return e}const Me={class:"p-4 flex flex-col gap-2 rounded-2xl md:rounded-2xl shadow-[0_0px_8px_0px_rgba(0,0,0,0.1)] bg-background border-2"},ze={class:"flex items-center gap-5"},$e={class:"flex flex-wrap mr-auto"},Te={class:"font-mono text-xl"},Oe={class:"flex flex-wrap ml-auto"},Se={key:0},ke={key:1},Ve={class:"flex items-center gap-2"},Re=b("span",{class:"w-full"},"登入",-1),Ge=g({__name:"top",setup(t){const o=de(),e=ce(),{data:i,error:a,refresh:s}=Ce("get_admin",async()=>{const{data:c,error:_}=await o.from("admin").select("*").eq("id",e.value.id);return _?null:c[0]});ue();const v={async loginWithGoogle(){const c=O("localhost:3000");window.location.host==="localhost:3000"?c.value="localhost:3000":c.value="bearyep.github.io/STP_Reservation/",console.log(c),await o.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.protocol+"//bearyep.github.io/STP_Reservation//auth/callback"}})}};return(c,_)=>{const D=q,r=H,P=_e,k=ge,$=we,T=be,u=De,h=ve,m=ye,l=he;return f(),V("div",null,[b("div",Me,[b("div",ze,[b("div",$e,[b("div",Te,[p(r,{to:"/",class:"font-mono mx-2"},{default:d(()=>[p(D,{name:"ph:house",size:"20"}),B(" STP預約系統 ")]),_:1})])]),b("div",Oe,[n(e)?(f(),V("div",Se,[p(l,null,{default:d(()=>[p(k,{"as-child":""},{default:d(()=>[p(P,{size:"xs",variant:"ghost"},{default:d(()=>[p(D,{name:"ri:more-fill"})]),_:1})]),_:1}),p(m,null,{default:d(()=>[p($,null,{default:d(()=>[B(pe(n(e).user_metadata.full_name),1)]),_:1}),p(T),p(h,null,{default:d(()=>[p(u,{class:"cursor-pointer",onClick:_[0]||(_[0]=x=>("navigateTo"in c?c.navigateTo:n(R))("/profile_edit"))},{default:d(()=>[B(" 個人資料編輯 ")]),_:1}),n(i)?(f(),y(u,{key:0,class:"cursor-pointer",onClick:_[1]||(_[1]=x=>("navigateTo"in c?c.navigateTo:n(R))("/backside"))},{default:d(()=>[B(" 後臺管理 ")]),_:1})):fe("",!0),p(u,{class:"cursor-pointer",onClick:_[2]||(_[2]=x=>("navigateTo"in c?c.navigateTo:n(R))("/logout"))},{default:d(()=>[B(" 登出 ")]),_:1})]),_:1})]),_:1})]),_:1})])):(f(),V("div",ke,[p(P,{variant:"outline",onClick:v.loginWithGoogle},{default:d(()=>[b("div",Ve,[p(D,{name:"devicon:google",size:"20"}),Re])]),_:1},8,["onClick"])]))])])])])}}});export{_e as _,Ge as a,Ce as u};
