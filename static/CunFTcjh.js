import{f as c,g as d,h as f,r as p,i as _,n as e,o as m,c as v,a as t}from"./CRhVPP4T.js";const h=t("div",{class:"flex items-center justify-center h-[100vh]"},[t("div",{class:"flex flex-col items-center space-y-4"},[t("div",null,"正在登入...")])],-1),b=[h],k=c({__name:"callback",setup(x){var n,l;const i=d(),r=f(),a=p({id:(n=r.value)==null?void 0:n.id,email:(l=r.value)==null?void 0:l.email});return _(async()=>{if(a.value){const{data:s}=await i.from("app_user").select("*").eq("id",a.value.id).single();if(s){if(s.first_time){e("/profile_edit");return}}else{const{data:o,error:u}=await i.from("app_user").insert({id:a.value.id,email:a.value.email,first_time:!0});if(u){e("/");return}e("/profile_edit");return}}else{e("/auth/login");return}e("/")}),(s,o)=>(m(),v("div",null,b))}});export{k as default};
