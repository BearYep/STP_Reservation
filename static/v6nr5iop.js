import{_ as V}from"./CekPjn8q.js";import{f as x,g as d,h,s as N,i as S,j as E,k as M,l as z,m as w,n as H,q as b,v as R,x as j,y as F,z as T,o as p,c as v,F as K,A as L,d as q,b as I,w as U,a as B,t as G}from"./CP8vGr3Q.js";const J=s=>s==="defer"||s===!1;function Q(...s){var C;const n=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(n);let[t,u,e={}]=s;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof u!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=x(),f=u,_=()=>d.value,y=()=>a.isHydrating?a.payload.data[t]:a.static.data[t];e.server=e.server??!0,e.default=e.default??_,e.getCachedData=e.getCachedData??y,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0,e.deep=e.deep??d.deep,e.dedupe=e.dedupe??"cancel";const m=()=>e.getCachedData(t,a)!=null;if(!a._asyncData[t]||!e.immediate){(C=a.payload._errors)[t]??(C[t]=d.errorValue);const i=e.deep?h:N;a._asyncData[t]={data:i(e.getCachedData(t,a)??e.default()),pending:h(!m()),error:S(a.payload._errors,t),status:h("idle"),_default:e.default}}const r={...a._asyncData[t]};delete r._default,r.refresh=r.execute=(i={})=>{if(a._asyncDataPromises[t]){if(J(i.dedupe??e.dedupe))return a._asyncDataPromises[t];a._asyncDataPromises[t].cancelled=!0}if((i._initial||a.isHydrating&&i._initial!==!1)&&m())return Promise.resolve(e.getCachedData(t,a));r.pending.value=!0,r.status.value="pending";const l=new Promise((c,o)=>{try{c(f(a))}catch(D){o(D)}}).then(async c=>{if(l.cancelled)return a._asyncDataPromises[t];let o=c;e.transform&&(o=await e.transform(c)),e.pick&&(o=X(o,e.pick)),a.payload.data[t]=o,r.data.value=o,r.error.value=d.errorValue,r.status.value="success"}).catch(c=>{if(l.cancelled)return a._asyncDataPromises[t];r.error.value=H(c),r.data.value=b(e.default()),r.status.value="error"}).finally(()=>{l.cancelled||(r.pending.value=!1,delete a._asyncDataPromises[t])});return a._asyncDataPromises[t]=l,a._asyncDataPromises[t]},r.clear=()=>W(a,t);const g=()=>r.refresh({_initial:!0}),O=e.server!==!1&&a.payload.serverRendered;{const i=R();if(i&&!i._nuxtOnBeforeMountCbs){i._nuxtOnBeforeMountCbs=[];const o=i._nuxtOnBeforeMountCbs;E(()=>{o.forEach(D=>{D()}),o.splice(0,o.length)}),M(()=>o.splice(0,o.length))}O&&a.isHydrating&&(r.error.value||m())?(r.pending.value=!1,r.status.value=r.error.value?"error":"success"):i&&(a.payload.serverRendered&&a.isHydrating||e.lazy)&&e.immediate?i._nuxtOnBeforeMountCbs.push(g):e.immediate&&g();const l=j();if(e.watch){const o=z(e.watch,()=>r.refresh());l&&w(o)}const c=a.hook("app:data:refresh",async o=>{(!o||o.includes(t))&&await r.refresh()});l&&w(c)}const P=Promise.resolve(a._asyncDataPromises[t]).then(()=>r);return Object.assign(P,r),P}function W(s,n){n in s.payload.data&&(s.payload.data[n]=void 0),n in s.payload._errors&&(s.payload._errors[n]=d.errorValue),s._asyncData[n]&&(s._asyncData[n].data.value=void 0,s._asyncData[n].error.value=d.errorValue,s._asyncData[n].pending.value=!1,s._asyncData[n].status.value="idle"),n in s._asyncDataPromises&&(s._asyncDataPromises[n]&&(s._asyncDataPromises[n].cancelled=!0),s._asyncDataPromises[n]=void 0)}function X(s,n){const t={};for(const u of n)t[u]=s[u];return t}const Y=B("button",null," 到下一頁 ",-1),k=F({__name:"index",setup(s){const n=T(),{data:t,error:u}=Q("get_data",async()=>{const{data:e,error:a}=await n.from("reservation_list").select();return a?null:e});return(e,a)=>{const f=V;return p(),v("div",null,[(p(!0),v(K,null,L(b(t),(_,y)=>(p(),v("div",{key:y},[B("span",null,G(_.name),1)]))),128)),q(" 測試 "),I(f,{to:"a"},{default:U(()=>[Y]),_:1})])}}});export{k as default};
