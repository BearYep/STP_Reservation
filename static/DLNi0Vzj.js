import{f as u,g as c,h as p,r as f,i as d,n as a,o as m,c as _}from"./kp6TFN3L.js";const b=u({__name:"callback",setup(v){var i,l;const r=c(),s=p(),e=f({id:(i=s.value)==null?void 0:i.id,email:(l=s.value)==null?void 0:l.email});return d(async()=>{if(console.log(s.value),e.value){console.log(e.value);const{data:t}=await r.from("app_user").select("*").eq("id",e.value.id).single();if(t){if(!t.first_time){a("/profile_edit");return}}else{const{data:n,error:o}=await r.from("app_user").insert({id:e.value.id,email:e.value.email,first_time:!0});if(o){console.log(o),a("/");return}a("/profile_edit");return}}else{a("/auth/login");return}a("/")}),(t,n)=>(m(),_("div",null," 正在登入... "))}});export{b as default};
